(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{606:function(t,e,a){"use strict";a.r(e);var s=a(32),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"项目结构设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目结构设计"}},[t._v("#")]),t._v(" 项目结构设计")]),t._v(" "),a("h2",{attrs:{id:"全局的命名空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局的命名空间"}},[t._v("#")]),t._v(" 全局的命名空间")]),t._v(" "),a("p",[t._v("有的时候会使用到全局的变量\n不是说会污染全局的变量空间就不使用\n而是按照项目的设计，初始化一个专属的对象当作命名空间\n项目所需的全局变量都设置到该对象中")]),t._v(" "),a("h2",{attrs:{id:"路由-权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路由-权限"}},[t._v("#")]),t._v(" 路由 & 权限")]),t._v(" "),a("ul",[a("li",[t._v("模块化\n按照项目页面的种类进行分组在modules目录中，分别导出\n统一引入index.js")]),t._v(" "),a("li",[t._v('懒加载，按照页面的分类，设置 /* webpackChunkName: "group-foo" */\n'),a("code",[t._v("const Foo = () => import(/* webpackChunkName: \"group-foo\" */ './Foo.vue')")])]),t._v(" "),a("li",[t._v("将需要鉴权的路由设置meta元信息"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("meta: {\n  title: '选择店铺',  // 一般用于设置document.title\n  auth: true,  // 是否需要鉴权\n  code: 5  // 当前页面的权键的代表值\n}\n")])])]),t._v("在 beforeEach 全局路由守卫中判断是否可以进入"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("router.beforeEach((to, from, next) => {\n  if (to.meta.title) {  // 路由发生变化修改页面title\n    document.title = to.meta.title\n  }\n  if (checkout(to, from, next)) {\n    next()  // 通过权键，进入页面\n  } else {\n    next({  // 不允许进入，进入指定的页面(如无权限的专门的页面，上面有返回和首页等跳转，返回跳转到进入权键失败前的那个页面)\n      path: 'xxx/xxxx'\n    })\n  }\n})\n")])])]),t._v("一般将各个需要权键页面的code统一存起来，比如一个用户可进入的页面的权限为: 1,2,3,4,6,7,9....\n那么只需要判断该页面的code是否存在与用户的权限的数据中就可以了\n如果需要更细粒度的权限控制，比如某一页面的部分是否可见")])]),t._v(" "),a("h2",{attrs:{id:"待打包的系统变量-根据环境的不同-配置不同的变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#待打包的系统变量-根据环境的不同-配置不同的变量"}},[t._v("#")]),t._v(" 待打包的系统变量(根据环境的不同，配置不同的变量)")]),t._v(" "),a("p",[t._v("VUE_APP_XXX  # 以这个开头的变量会被打包")]),t._v(" "),a("h2",{attrs:{id:"登录状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录状态"}},[t._v("#")]),t._v(" 登录状态")]),t._v(" "),a("ul",[a("li",[t._v("cookie\n后端设置cookie，cookie会随着每次的请求头中带到后端\n接口报错，跳转到登录界面")]),t._v(" "),a("li",[t._v("token\n当第一次登录系统的时候，后端将token发送过来，前端存在sessionStorage中\n每一次请求将token带在接口里面，后端对其进行校验\n登出系统或者接口401/403报错的时候，清除token并跳转到登录界面")])]),t._v(" "),a("h2",{attrs:{id:"css模块的编辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css模块的编辑"}},[t._v("#")]),t._v(" css模块的编辑")]),t._v(" "),a("p",[t._v("最外层组件使用id来控制保证不被外界的css样式干扰")]),t._v(" "),a("h2",{attrs:{id:"项目优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目优化"}},[t._v("#")]),t._v(" 项目优化")]),t._v(" "),a("ul",[a("li",[t._v("打包\n"),a("ol",[a("li",[t._v("启用路由懒加载")]),t._v(" "),a("li",[t._v("将公共的库文件提取出来，如vue vue-router vuex等")]),t._v(" "),a("li",[t._v("开启gzip")])])])]),t._v(" "),a("h2",{attrs:{id:"加载动画"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载动画"}},[t._v("#")]),t._v(" 加载动画")]),t._v(" "),a("p",[t._v("在body中设置一个加载DOM，在进入系统前将该DOM元素隐藏")]),t._v(" "),a("h2",{attrs:{id:"代码审核"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码审核"}},[t._v("#")]),t._v(" 代码审核")]),t._v(" "),a("p",[t._v("提审前需要自己审核代码\n代码设计需要提前讨论，避免审核时出现结构问题，重做\n审核的代码块需要小，量大了对于审核者十分不友好")])])}),[],!1,null,null,null);e.default=r.exports}}]);