(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{610:function(t,s,a){"use strict";a.r(s);var e=a(32),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文章"}},[t._v("#")]),t._v(" 文章")]),t._v(" "),a("h2",{attrs:{id:"mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[t._v("#")]),t._v(" mysql")]),t._v(" "),a("ul",[a("li",[t._v("创建物理目录, 用于存储mysql的数据库/表数据\n"),a("ul",[a("li",[t._v("用于存放mysql数据文件\n"),a("code",[t._v("mkdir /root/dockerData/mysql/data")])]),t._v(" "),a("li",[t._v("用于存放mysql配置文件\n"),a("code",[t._v("mkdir /root/dockerData/mysql/conf")])])])]),t._v(" "),a("li",[t._v("在/opt/docker/data/mysql/conf目录下建立3个mysql配置文件\n"),a("ol",[a("li",[t._v("docker.cnf"),a("div",{staticClass:"language-txt extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[mysqld]\nskip-host-cache\nskip-name-resolve\n")])])])]),t._v(" "),a("li",[t._v("mysql.cnf"),a("div",{staticClass:"language-txt extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[mysql]\ndefault-character-set = utf8\n\n[mysql_safe]\ndefault-character-set = utf8\n\n[client]\ndefault-character-set = utf8\n\n[mysqld]\npid-file      = /var/run/mysqld/mysqld.pid\nsocket        = /var/run/mysqld/mysqld.sock\ndatadir       = /var/lib/mysql\n#log-error    = /var/log/mysql/error.log\n# By default we only accept connections from localhost\n#bind-address = 127.0.0.1\n# Disabling symbolic-links is recommended to prevent assorted security risks\nsymbolic-links=0\n\n# 修改mysql默认字符集\ninit_connect  = 'SET NAMES utf8'\ncharacter-set-server = utf8\ncollation-server = utf8_unicode_ci\n")])])])]),t._v(" "),a("li",[t._v("mysqldump.cnf"),a("div",{staticClass:"language-txt extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[mysqldump]\nquick\nquote-names\nmax_allowed_packet  = 16M\n")])])])])])]),t._v(" "),a("li",[t._v("启动服务"),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("docker run -d --name mysql57 --net"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("backend -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3306")]),t._v(":3306 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" \n-e "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" \n-v /root/dockerData/mysql/data:/var/lib/mysql "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" \n-v /root/dockerData/mysql/conf:/etc/mysql/conf.d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" \nmysql:5.7\n")])])])])]),t._v(" "),a("p",[t._v("ps: 删除数据库容器，如果数据没有丢失就没问题")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/5f5e419b5de8",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"gogs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gogs"}},[t._v("#")]),t._v(" gogs")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/2a7acb07b352/",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文章"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);